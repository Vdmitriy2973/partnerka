{% extends 'partner_app/base.html' %}
{% load static %}

{% load django_vite %}
{% vite_hmr_client %}

{% block head_js_scripts %}
{% vite_asset 'partner_app/assets/js/static-pages/static_page.js' %}
{% endblock head_js_scripts %}

{% block title %}Отзывы{% endblock title %}

{% block header %}
{% include "partner_app/reviews/components/header.html" %}
{% endblock header %}

{% block main_class %}bg-base-200 min-h-screen{% endblock %}
{% block content %}
<div class="min-h-screen">
    <div id="reviews_messages__container" class="fixed top-4 right-4 space-y-2 z-[99999]"></div>
    <div class="container mx-auto px-4 py-12">
        <!-- Header Section -->
        <div class="text-center mb-16 fade-in">
            <h1
                class="text-5xl font-bold mb-6 bg-gradient-to-r from-pink-500 via-purple-500 to-blue-500 bg-clip-text text-transparent">
                Отзывы наших пользователей
            </h1>

            <p class="text-xl text-gray-600 max-w-3xl mx-auto">
                Узнайте, что говорят о нас наши пользователей и поделитесь своим опытом
            </p>
        </div>

        <!-- Stats -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-16 fade-in">
            <div class="stats shadow-xl bg-white/80 backdrop-blur-md">
                <div class="stat">
                    <div class="stat-figure text-indigo-500">
                        <i data-lucide="users" class="w-8 h-8"></i>
                    </div>
                    <div class="stat-title">Пользователей</div>
                    <div class="stat-value text-indigo-600">2,847</div>
                </div>
            </div>

            <div class="stats shadow-xl bg-white/80 backdrop-blur-md">
                <div class="stat">
                    <div class="stat-figure text-purple-500">
                        <i data-lucide="star" class="w-8 h-8"></i>
                    </div>
                    <div class="stat-title">Средний рейтинг</div>
                    <div class="stat-value text-purple-600">4.8</div>
                </div>
            </div>

            <div class="stats shadow-xl bg-white/80 backdrop-blur-md">
                <div class="stat">
                    <div class="stat-figure text-green-500">
                        <i data-lucide="message-circle" class="w-8 h-8"></i>
                    </div>
                    <div class="stat-title">Отзывов</div>
                    <div class="stat-value text-green-600">1,293</div>
                </div>
            </div>
        </div>

        <!-- Existing Reviews -->
        <div class="mb-16">
            <h2 class="text-3xl font-bold text-center mb-12 text-gray-800">Последние отзывы</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8" id="reviews-container">
                {% for review in reviews %}
                <div class="review-card fade-in show">
                    <div class="relative z-10">
                        <div class="flex items-center justify-between mb-4">
                            <div class="flex items-center space-x-3">
                                <div class="avatar avatar-placeholder">
                                    <div class="bg-white/20 text-white rounded-full w-12">
                                        <span class="text-lg font-bold">{{ review.name|first }}</span>
                                    </div>
                                </div>
                                <div>
                                    <h3 class="font-bold text-lg">{{ review.name }}</h3>
                                    <p class="text-white/70 text-sm">{{ review.created_at }}</p>
                                </div>
                            </div>
                            <div class="flex space-x-1">
                                {% for star in "x"|ljust:review.rating %}
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round" data-lucide="star"
                                        class="lucide lucide-star w-5 h-5 text-yellow-300">
                                        <path
                                            d="M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z">
                                        </path>
                                    </svg>
                                {% endfor %}
                            </div>
                        </div>
                        <p class="text-white/90 leading-relaxed">{{ review.comment }}</p>
                    </div>
                </div>
                {% empty %}
                <div class="review-card fade-in show">
                    <div class="relative z-10">
                        <div class="flex items-center justify-between mb-4">
                            <div class="flex items-center space-x-3">
                                <div class="avatar avatar-placeholder">
                                    <div class="bg-white/20 text-white rounded-full w-12">
                                        <span class="text-lg font-bold">О</span>
                                    </div>
                                </div>
                                <div>
                                    <h3 class="font-bold text-lg">Олег</h3>
                                    <p class="text-white/70 text-sm">5 сентября 2025</p>
                                </div>
                            </div>
                            <div class="flex space-x-1">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round" data-lucide="star"
                                    class="lucide lucide-star w-5 h-5 text-yellow-300">
                                    <path
                                        d="M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z">
                                    </path>
                                </svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round" data-lucide="star"
                                    class="lucide lucide-star w-5 h-5 text-yellow-300">
                                    <path
                                        d="M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z">
                                    </path>
                                </svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round" data-lucide="star"
                                    class="lucide lucide-star w-5 h-5 text-yellow-300">
                                    <path
                                        d="M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z">
                                    </path>
                                </svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round" data-lucide="star"
                                    class="lucide lucide-star w-5 h-5 text-yellow-300">
                                    <path
                                        d="M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z">
                                    </path>
                                </svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round" data-lucide="star"
                                    class="lucide lucide-star w-5 h-5 text-white/30">
                                    <path
                                        d="M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z">
                                    </path>
                                </svg>
                            </div>
                        </div>
                        <p class="text-white/90 leading-relaxed">Достойная программа с хорошей поддержкой. Материалы
                            качественные, конверсия высокая. Продолжу сотрудничество.</p>
                    </div>
                </div>

                <div class="review-card fade-in show">
                    <div class="relative z-10">
                        <div class="flex items-center justify-between mb-4">
                            <div class="flex items-center space-x-3">
                                <div class="avatar avatar-placeholder">
                                    <div class="bg-white/20 text-white rounded-full w-12">
                                        <span class="text-lg font-bold">Д</span>
                                    </div>
                                </div>
                                <div>
                                    <h3 class="font-bold text-lg">Дмитрий</h3>
                                    <p class="text-white/70 text-sm">5 сентября 2025</p>
                                </div>
                            </div>
                            <div class="flex space-x-1">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round" data-lucide="star"
                                    class="lucide lucide-star w-5 h-5 text-yellow-300">
                                    <path
                                        d="M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z">
                                    </path>
                                </svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round" data-lucide="star"
                                    class="lucide lucide-star w-5 h-5 text-yellow-300">
                                    <path
                                        d="M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z">
                                    </path>
                                </svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round" data-lucide="star"
                                    class="lucide lucide-star w-5 h-5 text-yellow-300">
                                    <path
                                        d="M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z">
                                    </path>
                                </svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round" data-lucide="star"
                                    class="lucide lucide-star w-5 h-5 text-yellow-300">
                                    <path
                                        d="M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z">
                                    </path>
                                </svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round" data-lucide="star"
                                    class="lucide lucide-star w-5 h-5 text-white/30">
                                    <path
                                        d="M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z">
                                    </path>
                                </svg>
                            </div>
                        </div>
                        <p class="text-white/90 leading-relaxed">Достойная программа с хорошей поддержкой. Материалы
                            качественные, конверсия высокая. Продолжу сотрудничество.</p>
                    </div>
                </div>

                <div class="review-card fade-in show">
                    <div class="relative z-10">
                        <div class="flex items-center justify-between mb-4">
                            <div class="flex items-center space-x-3">
                                <div class="avatar avatar-placeholder">
                                    <div class="bg-white/20 text-white rounded-full w-12">
                                        <span class="text-lg font-bold">М</span>
                                    </div>
                                </div>
                                <div>
                                    <h3 class="font-bold text-lg">Максим</h3>
                                    <p class="text-white/70 text-sm">15 сентября 2025</p>
                                </div>
                            </div>
                            <div class="flex space-x-1">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round" data-lucide="star"
                                    class="lucide lucide-star w-5 h-5 text-yellow-300">
                                    <path
                                        d="M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z">
                                    </path>
                                </svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round" data-lucide="star"
                                    class="lucide lucide-star w-5 h-5 text-yellow-300">
                                    <path
                                        d="M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z">
                                    </path>
                                </svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round" data-lucide="star"
                                    class="lucide lucide-star w-5 h-5 text-yellow-300">
                                    <path
                                        d="M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z">
                                    </path>
                                </svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round" data-lucide="star"
                                    class="lucide lucide-star w-5 h-5 text-yellow-300">
                                    <path
                                        d="M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z">
                                    </path>
                                </svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round" data-lucide="star"
                                    class="lucide lucide-star w-5 h-5 text-yellow-300">
                                    <path
                                        d="M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z">
                                    </path>
                                </svg>
                            </div>
                        </div>
                        <p class="text-white/90 leading-relaxed">Отличная партнёрская программа! Работаю уже год, доходы
                            стабильные, поддержка всегда на связи. Рекомендую всем!</p>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>

        <!-- Review Form -->
        <div class="max-w-2xl mx-auto">
            <div class="card shadow-2xl bg-white/90 backdrop-blur-md fade-in">
                <div class="card-body">
                    <h2
                        class="text-5xl text-center font-bold mb-6 bg-gradient-to-r from-pink-500 via-purple-500 to-blue-500 bg-clip-text text-transparent">
                        Поделитесь своим опытом
                    </h2>

                    <form id="review-form" class="space-y-6" method="POST">
                        {% csrf_token %}
                        <div class="form-control">
                            <label class="label">
                                <span class="label-text text-lg font-semibold">Ваше имя</span>
                            </label>
                            <input type="text" id="reviewerName" name="reviewerName" placeholder="Введите ваше имя"
                                class="input input-bordered input-lg w-full bg-white/50 backdrop-blur-sm focus:bg-white transition-all duration-300"
                                required>
                        </div>

                        <div class="form-control">
                            <label class="label">
                                <span class="label-text text-lg font-semibold">Оценка</span>
                            </label>

                            <div class="star-rating__container">
                                <div class="star-rating flex justify-center py-4" id="starRating">
                                    <div class="star" data-rating="1">
                                        <i class="fa fa-star text-2xl text-gray-400 cursor-pointer"></i>
                                    </div>
                                    <div class="star" data-rating="2">
                                        <i class="fa fa-star text-2xl text-gray-400 cursor-pointer"></i>
                                    </div>
                                    <div class="star" data-rating="3">
                                        <i class="fa fa-star text-2xl text-gray-400 cursor-pointer"></i>
                                    </div>
                                    <div class="star" data-rating="4">
                                        <i class="fa fa-star text-2xl text-gray-400 cursor-pointer"></i>
                                    </div>
                                    <div class="star" data-rating="5">
                                        <i class="fa fa-star text-2xl text-gray-400 cursor-pointer"></i>
                                    </div>
                                </div>
                            </div>
                            <div class="text-center mt-2">
                                <span id="ratingText" class="text-gray-500">Выберите оценку</span>
                            </div>
                        </div>

                        <input required class="hidden" id="ratingNumber" name="rating" type="number" min="1" max="5"
                            value="0" />

                        <div class="form-control">
                            <label class="label">
                                <span class="label-text text-lg font-semibold">Ваш отзыв</span>
                            </label>
                            <textarea id="reviewText" name="reviewText" maxlength="200" minlength="5"
                                class="textarea textarea-bordered textarea-lg w-full h-32 bg-white/50 backdrop-blur-sm focus:bg-white transition-all duration-300"
                                placeholder="Расскажите о вашем опыте сотрудничества с нами..." required></textarea>
                        </div>

                        <div class="form-control text-center mt-8">
                            <button type="submit"
                                class="btn btn-primary btn-lg gradient-bg border-none w-full text-white hover:scale-105 transition-all duration-300">
                                <i class="fa fa-paper-plane" aria-hidden="true"></i>
                                Отправить отзыв
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Success Toast -->
    <div id="successToast" class="toast toast-center hidden">
        <div class="alert alert-success">
            <i data-lucide="check-circle" class="w-6 h-6"></i>
            <span>Спасибо за ваш отзыв!</span>
        </div>
    </div>
</div>

<script>
    const starContainer = document.getElementById('starRating');
    const ratingNumber = document.getElementById('ratingNumber');
    const ratingText = document.getElementById('ratingText');
    let currentRating = 0;

    starContainer.addEventListener('click', (e) => {
        const star = e.target.closest('[data-rating]');
        if (!star) return;

        currentRating = parseInt(star.dataset.rating, 10);
        ratingNumber.value = currentRating;
        ratingText.textContent = `Вы выбрали: ${currentRating}`;

        // Подсветка всех звезд
        starContainer.querySelectorAll('[data-rating]').forEach((s, idx) => {
            const icon = s.querySelector('svg, i'); // универсально для svg или i
            if (!icon) return;
            if (idx < currentRating) {
                icon.classList.add('text-yellow-400');
                icon.classList.remove('text-gray-400');
            } else {
                icon.classList.add('text-gray-400');
                icon.classList.remove('text-yellow-400');
            }
        });
    });


    setupReview();

    function setupReview() {
        const reviewForm = document.getElementById('review-form');
        reviewForm.addEventListener('submit', async function (event) {
            event.preventDefault();
            const formData = new FormData(reviewForm);
            try {
                const response = await fetch(`/make_review`, {
                    method: "POST",
                    body: formData
                });
                if (!response.ok) {
                    return showToast('Ошибка при отправке отзыва', 'error');
                }
            }
            catch (error) {
                return showToast('Ошибка сети', 'error');
            }
            showToast('Отзыв успешно отправлен', 'success');
        })
    }


    function showToast(message, type = 'info') {
        const toast = document.createElement('div');
        toast.className = `alert-message alert alert-${type} text-white p-4 mr-6 mb-6 shadow-lg animate-fade-in`;
        toast.innerHTML = `
            <div>
                <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'}"></i>
                <span>${message}</span>
            </div>`;
        document.getElementById('reviews_messages__container').appendChild(toast);
        setTimeout(() => {
            toast.classList.add('animate-slide-out-left');
            setTimeout(() => toast.remove(), 800);
        }, 5000);
    }
</script>

<style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

    * {
        font-family: 'Inter', sans-serif;
    }

    .fade-in {
        animation: fadeInUp 0.6s ease-out forwards;
        opacity: 0;
        transform: translateY(20px);
    }

    .fade-in.show {
        opacity: 1;
        transform: translateY(0);
    }

    @keyframes fadeInUp {
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .star-rating {
        display: flex;
        gap: 4px;
    }

    .star {
        width: 24px;
        height: 24px;
        cursor: pointer;
        transition: all 0.2s ease;
    }

    .star:hover {
        transform: scale(1.1);
    }

    .star.filled {
        color: #fbbf24;
    }

    .star.empty {
        color: #d1d5db;
    }

    .review-card {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border-radius: 16px;
        color: white;
        padding: 24px;
        position: relative;
        overflow: hidden;
        transition: all 0.3s ease;
    }

    .review-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0) 100%);
        pointer-events: none;
    }

    .review-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 20px 40px rgba(102, 126, 234, 0.3);
    }

    .gradient-bg {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }

    /* Анимации */
    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(10px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .animate-fade-in {
        animation: fadeIn 0.6s ease-out forwards;
    }

    .delay-100 {
        animation-delay: 0.1s;
    }

    .delay-200 {
        animation-delay: 0.2s;
    }

    .delay-300 {
        animation-delay: 0.3s;
    }

    .delay-400 {
        animation-delay: 0.4s;
    }

    .delay-500 {
        animation-delay: 0.4s;
    }

    .delay-600 {
        animation-delay: 0.6s;
    }

    @keyframes slide-out-left {
        0% {
            opacity: 1;
            transform: translateX(0);
        }

        70% {
            opacity: 0;
            transform: translateX(100%);
        }

        100% {
            opacity: 0;
            transform: translateX(100%);
            max-height: 0;
            margin-bottom: 0;
            padding: 0;
            border: none;
        }
    }

    .animate-slide-out-left {
        animation: slide-out-left 0.8s cubic-bezier(0.4, 0, 0.2, 1) forwards;
    }
</style>
{% endblock %}